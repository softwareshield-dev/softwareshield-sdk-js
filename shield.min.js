var Shield=function(){function r(){if(gs){var a=gs.os.getEnvironmentVariable("GS5_CHECKPOINT_SERVER");if(a){checkPointServers=[];checkPointServers[0]={Name:"server_0",URL:a+"/checkpoint2/CheckPointService.svc/GenerateResponseCode?callback\x3d?",Tries:0,MaxTries:5,TimeOut:15E3};return}}"undefined"===typeof checkPointServers&&(checkPointServers=[],["https://shield.yummy.net","https://secure.yummy.net"].forEach(function(a,b){checkPointServers.push({Name:"server_"+b,URL:a+"/checkpoint2/CheckPointService.svc/GenerateResponseCode?callback\x3d?",
Tries:0,MaxTries:5,TimeOut:15E3})}))}var q=0,b=null;try{b=gs}catch(a){alert(a)}if(!b)throw"Failed to Load GS 5";return{CheckPointActivationType:{Unlock:0,Revoke:1,ValidateSN:2},CheckPointFunction:{GenerateResponseCode:"GenerateResponseCode",ValidateSN:"ValidateSerialNumber"},CheckPointResponse:{InvalidSerialNumber:0,NoActivationsRemaining:1,CodeGenerated:2,FormatOK:3,InvalidRequestCode:4,KeyGenError:5,CodeBadFormat:10,InternalFailure:18,GetSNFailure:61,GetSNSuccess:62,InvalidProduct:82,RevokeReceiptAccepted:100,
RevokeInvalidReceipt:101,RevokeInvalidSerialNumber:102,RevokeReactivationToleranceExceeded:103},LicenseModel:{ExpireByDuration:"gs.lm.expire.duration.1",ExpireByAccessTimes:"gs.lm.expire.accessTime.1",ExpireBySessionTime:"gs.lm.expire.sessionTime.1",ExpireByHardDate:"gs.lm.expire.hardDate.1",ExpireByPeriod:"gs.lm.expire.period.1",AlwaysLock:"gs.lm.alwaysLock.1",AlwaysRun:"gs.lm.alwaysRun.1"},Debug:function(){return null===b.sessionData.getVar("debug")?!1:!0},SetDebug:function(a){b.sessionData.setVar("debug",
a)},Log:function(a,b){console.log((b?"!ERR: ":"")+a)},GameShieldVersion:function(){return b.version},Version:function(){return b.version},ProductName:function(){return b.productName},ProductId:function(){return b.productId},IsFullyRegistered:function(){for(var a=0;a<b.core.getTotalEntityCount();++a)if(!b.core.getEntityByIndex(a).isFullyLicensed())return!1;return!0},IsRegistered:function(){return Shield.Entities.GetCurrentEntity().isFullyLicensed()},GetCurrentLicense:function(){return"(unknown)"==
b.core.getCurrentEntityId()?gs.single.getLicense():b.core.getCurrentEntity().getLicenseByIndex(0)},RequestActivation:function(){var a=Shield.GetCurrentLicense();return b.util.getUnlockRequestCode(a)+":"+b.buildId},RequestCleanMachine:function(){return this.RequestErrorFix()},RequestFingerprintFix:function(){return this.RequestErrorFix()},RequestErrorFix:function(){var a=b.core.createRequest();a.addAction(b.core.ACT_FIX,null);return a.getRequestCode()},Play:function(){b.app.play()},Launch:function(){b.app.play()},
Close:function(){b.app.exit(0)},Restart:function(){b.app.restart()},LaunchDefaultBrowser:function(a){gs.util.launchDefaultBrowser(a)},WindowVisible:function(a){a?b.ui.show():b.ui.hide()},Navigate:function(){document.location=$("#domain").val()},ValidateSerial:function(a,d,c){if(!Shield.InActivating){Shield.InActivating=!0;var e=b.core.createRequest();e.addAction(b.core.ACT_DUMMY,null);e=e.getRequestCode();q++;Shield.InternalActivate(e,a,d,c,Shield.CheckPointActivationType.ValidateSN,"ValidateSerialNumber")}},
Revoke:function(a,b,c){setTimeout(function(){gs.core.revokeApp(a)?c():b({message:gs.core.getLastErrorMessage()})},500)},Ping:function(a,b){Shield.InActivating=!1;r();Shield.PingParallel(a,b)},PingServer:function(a,b){var c=new Date;$.ajax({url:a.URL,dataType:"jsonp",timeout:Math.max(+a.TimeOut,Shield.max_checkpoint2_ping_time_out),cache:!1,data:{productID:"ping",serialNumber:"",requestCode:"",BuildId:-1}}).success(function(a){console.log("PingServer success: result ("+JSON.stringify(a)+")");a.err?
b(a.err,null):b(null,{clientIP:a.UserHostAddress,round_trip_time:(new Date).getTime()-c.getTime(),max_process_time:a.PerfData?+a.PerfData.max_process_time:Shield.max_checkpoint2_process_time})}).error(function(a,c,m){console.log("PingServer fails: error ["+c+"] ex ["+m+"]");b(c,null)})},PingParallel:function(a,b){var c=0,e=0;checkPointServers.forEach(function(h){h.Enabled=!1;h.Tries=0;h.EffectiveTimeOut=0;Shield.PingServer(h,function(m,p){m?(c++,c>=checkPointServers.length&&b&&b(m)):(console.log(JSON.stringify(p)),
h.Enabled=!0,h.clientIP=p.clientIP,h.EffectiveTimeOut=Math.max(+h.TimeOut,+p.round_trip_time+p.max_process_time),console.log("srv.EffectiveTimeOut \x3d "+h.EffectiveTimeOut),console.log("success_count \x3d "+e),e++,console.log(JSON.stringify(h)),1==e&&a&&a(h))})})},FixError:function(a,b,c){if(!Shield.InActivating)return Shield.InActivating=!0,q++,Shield.InternalActivate(this.RequestErrorFix(),a,b,c,Shield.CheckPointActivationType.Unlock)},Clean:function(a,b,c){this.FixError(a,b,c)},FingerprintFix:function(a,
b,c){this.FixError(a,b,c)},Extend:function(a,b,c){var e=Shield.GetCurrentLicense(),e=gs.util.getAddDurationRequestCode(e);q++;return Shield.InternalActivate(e,a,b,c)},InActivating:!1,Activate:function(a,d,c){if(!Shield.InActivating){Shield.InActivating=!0;var e=b.core.createRequest();e.addAction(b.core.ACT_DUMMY,null);e=e.getRequestCode();q++;Shield.InternalActivate(e,a,d,c,Shield.CheckPointActivationType.Unlock)}},max_checkpoint2_ping_time_out:3E4,max_checkpoint2_time_out:6E4,max_checkpoint2_process_time:3E3,
InternalActivate:function(a,d,c,e,h,m){function p(){var a=null;checkPointServers.forEach(function(b){b.Enabled&&b.Tries<b.MaxTries&&(null==a||b.EffectiveTimeOut<a.EffectiveTimeOut)&&(a=b)});return a}if(c)if(e){var f=p();if(null==f)console.log("Could not connect to Any Activation Server"),checkPointServers.forEach(function(a){a.Enabled=!0;a.EffectiveTimeOut=a.TimeOut;a.Tries=0}),Shield.InActivating=!1,c&&c({responseCode:0,message:"Could not connect to any activation server"});else{console.log("Try activating via server: "+
JSON.stringify(f));d=d.trim();var r={productID:b.productId,serialNumber:d,requestCode:a,nonce:q,BuildId:b.buildId,architecture:gs.os.name},t=f.URL;"undefined"!==typeof m&&(t=f.URL.replace("GenerateResponseCode",m));f.EffectiveTimeOut=f.EffectiveTimeOut?f.EffectiveTimeOut:f.TimeOut;console.log(JSON.stringify(f));$.ajax({url:t,dataType:"jsonp",timeout:f.EffectiveTimeOut,cache:!1,data:r}).success(function(n){console.log(JSON.stringify(n));var k=!0,g="",l=!1;if(n.hasOwnProperty("ResponseCode"))switch(n.ResponseCode){case Shield.CheckPointResponse.InvalidSerialNumber:g=
"Invalid Serial Number";break;case Shield.CheckPointResponse.NoActivationsRemaining:g="No Activations Remaining";break;case Shield.CheckPointResponse.InvalidRequestCode:g="Invalid Request Code";break;case Shield.CheckPointResponse.KeyGenError:g="License Code Generation Error";break;case Shield.CheckPointResponse.CodeGenerated:k=!1;break;case Shield.CheckPointResponse.FormatOK:break;case Shield.CheckPointResponse.CodeBadFormat:g="Code Bad Format";break;case Shield.CheckPointResponse.InternalFailure:g=
"Internal Server Error";l=!0;break;case Shield.CheckPointResponse.GetSNFailure:g="Serial does not exist on the server.";break;case Shield.CheckPointResponse.GetSNSuccess:k=!1;break;case Shield.CheckPointResponse.InvalidProduct:g="Invalid Product";break;case Shield.CheckPointResponse.RevokeReceiptAccepted:k=!1;break;case Shield.CheckPointResponse.RevokeInvalidReceipt:g="Invalid Revoke Receipt";break;case Shield.CheckPointResponse.RevokeInvalidSerialNumber:g="Invalid serial number";break;case Shield.CheckPointResponse.RevokeReactivationToleranceExceeded:g=
"Reactivation limit Exceeded.";break;default:g="There was unknown error",l=!0,Shield.Log("Shield.InternalActivate: ResponseCode: "+f.ResponseCode)}else l=!0;if(l)return f.Enabled=!1,Shield.InternalActivate(a,d,c,e,h,m);l={sn:d,snRef:n.SerialNumberReference,responseCode:n.ResponseCode,message:g};if(k)Shield.Log("Shield.InternalActivate: "+g+", ResponseCode: "+n.ResponseCode),Shield.InActivating=!1,c(l);else{k=!0;switch(h){case Shield.CheckPointActivationType.Unlock:g=!1;b.core.applyLicenseCodeEx?(console.log("applyLicenseCodeEx..."),
g=b.core.applyLicenseCodeEx(n.Result,d,n.SerialNumberReference)):(console.log("applyLicenseCode..."),g=b.core.applyLicenseCode(n.Result));g?Shield.Log("Shield.InternalActivate: Activated!"):(k=!1,Shield.Log("Shield.InternalActivate: Failed to Local Activate"),l.message=b.core.getLastErrorMessage(),Shield.Log("Shield.InternalActivate: "+l.message,!0));break;case Shield.CheckPointActivationType.Revoke:break;case Shield.CheckPointActivationType.ValidateSN:break;default:Shield.Log("Shield.InternalActivate: Unknown ActivationType")}Shield.InActivating=
!1;k?e(l):c(l)}}).error(function(b,k,g){Shield.Log("Shield.InternalActivate: Ajax failed error: ("+k+") + ex ("+g+"). Server name: "+f.Name+" Attempt: "+f.Tries+" Max Attempts: "+f.MaxTries);"timeout"==k?(f.EffectiveTimeOut*=2,f.EffectiveTimeOut>Shield.max_checkpoint2_time_out?f.Enabled=!1:f.Tries++):f.Enabled=!1;Shield.InternalActivate(a,d,c,e,h,m)})}}else Shield.Log("Shield.InternalActivate: successFunction is not defined!",!0);else Shield.Log("Shield.InternalActivate: failFunction is not defined!",
!0)},ManualActivate:function(a){Shield.Log("Shield.ManualActivate: LicenseKey; "+a);b.core.applyLicenseCode(a)?(Shield.Log("Shield.ManualActivate:  Manual Activation Success!"),result=!0):(Shield.Log("Shield.ManualActivate: Failed To Local Activate"),Shield.Log("Shield.ManualActivate: Error code: "+b.core.getLastErrorCode()+" Message: "+b.core.getLastErrorMessage(),!0),result=!1);return result},IsOnlineActivationPreferred:function(){return b.core.isOnlineActivationPreferred()},InputActivationCode:function(a,
d,c){b.core.applyLicenseCode(a)?d&&d():c&&c("Invalid Activation Code");return!1},WebActivate:function(a,b){var c="https://checkpoint2manager.yummy.net/Activate/"+gs.productId+"?",e=b||gs.core.getPreliminarySN()||gs.sessionData.getVar("serial_number");e&&(c+="serialNumber\x3d"+e);a&&(c+="\x26\x26requestCode\x3d"+a);gs.util.launchDefaultBrowser(c)},GetLicense:function(a){a=a||Shield.Entities.GetCurrentEntity();return a.getLicenseByIndex(0)},Entities:function(){return{GetCurrentEntity:function(){return"(unknown)"==
b.core.getCurrentEntityId()?gs.single.getEntity():b.core.getCurrentEntity()},GetActivatedEntities:function(){for(var a=b.core.getTotalEntityCount(),d=[],c=0;c<a;c++){var e=b.core.getEntityByIndex(c);e.isFullyLicensed()&&d.push(e)}return d},GetEntities:function(){for(var a=b.core.getTotalEntityCount(),d=[],c=0;c<a;c++)d.push(b.core.getEntityByIndex(c));return d},GetTotalEntityCount:function(){return b.core.getTotalEntityCount()},GetEntityByIndex:function(a){var d=b.core.getTotalEntityCount();return a>=
d||0>a?(Shield.Log("Shield.Entities.GetEntityByIndex: index out of range."),null):b.core.getEntityByIndex(a)},GetUnlockRequestCode:function(a){return b.util.getUnlockRequestCode(a)},GetAccessTimesRemaining:function(a){var b=Shield.GetLicense(a);if(null===b)return Shield.Log("License is null"),null;if(b.id!==Shield.LicenseModel.ExpireByAccessTimes)return Shield.Log("The entity has the wrong license type. "+b.id,!0),null;a=b.getParamByName("maxAccessTimes").getValue();b=b.getParamByName("usedTimes").getValue();
return a-b},GetAccessTimesMax:function(a){a=Shield.GetLicense(a);return null===a?(Shield.Log("License is null"),null):a.id!==Shield.LicenseModel.ExpireByAccessTimes?(Shield.Log("The entity has the wrong license type. "+a.id,!0),null):a.getParamByName("maxAccessTimes").getValue()},GetAccessTimesUsed:function(a){a=Shield.GetLicense(a);return null===a?(Shield.Log("License is null"),null):a.id!==Shield.LicenseModel.ExpireByAccessTimes?(Shield.Log("The entity has the wrong license type. "+a.id,!0),null):
a.getParamByName("usedTimes").getValue()},GetSessionTimeMinutes:function(a){a=Shield.GetLicense(a);if(null===a)return Shield.Log("License is null"),null;if(a.id!==Shield.LicenseModel.ExpireBySessionTime)return Shield.Log("The entity has the wrong license type. "+a.id,!0),null;a=a.getParamByName("maxSessionTime").getValue();return Math.ceil(a/60)},GetSessionTimeSeconds:function(a){a=Shield.GetLicense(a);return null===a?(Shield.Log("License is null"),null):a.id!==Shield.LicenseModel.ExpireBySessionTime?
(Shield.Log("The entity has the wrong license type. "+a.id,!0),null):a.getParamByName("maxSessionTime").getValue()},GetTimeBegin:function(a){a=Shield.GetLicense(a);return null===a?(Shield.Log("License is null"),null):a.id!==Shield.LicenseModel.ExpireByHardDate?(Shield.Log("The entity has the wrong license type. "+a.id,!0),null):a.getParamByName("timeBegin").getValue()},GetTimeEnd:function(a){a=Shield.GetLicense(a);return null===a?(Shield.Log("License is null"),null):a.id!==Shield.LicenseModel.ExpireByHardDate?
(Shield.Log("The entity has the wrong license type. "+a.id,!0),null):a.getParamByName("timeEnd").getValue()},GetExpirePeriod:function(a){a=Shield.GetLicense(a);return null===a?(Shield.Log("License is null"),null):a.id!==Shield.LicenseModel.ExpireByPeriod?(Shield.Log("The entity has the wrong license type. "+a.id,!0),null):a.getParamByName("periodInSeconds").getValue()},GetTimeFirstAccess:function(a){a=Shield.GetLicense(a);return null===a?(Shield.Log("License is null"),null):a.id!==Shield.LicenseModel.ExpireByPeriod?
(Shield.Log("The entity has the wrong license type. "+a.id,!0),null):a.getParamByName("timeFirstAccess").getValue()},GetTimeRemaining:function(a){var b=Shield.GetLicense(a);if(null===b)return Shield.Log("Entity License is null."),null;if(b.id!==Shield.LicenseModel.ExpireByDuration)return Shield.Log("Entity has wrong license!",!0),null;a=b.getParamByName("maxDurationInSeconds").getValue();b=b.getParamByName("usedDurationInSeconds").getValue();return Math.ceil((a-b)/60)},GetTimeRemainingSeconds:function(a){var b=
Shield.GetLicense(a);if(null===b)return Shield.Log("License is Null!"),null;if(b.id!==Shield.LicenseModel.ExpireByDuration)return Shield.Log("Entity has the wrong License!"),null;a=b.getParamByName("maxDurationInSeconds").getValue();b=b.getParamByName("usedDurationInSeconds").getValue();return a-b},GetTotalTime:function(a){a=Shield.GetLicense(a);if(null===a)return Shield.Log("License is Null!"),null;if(a.id!==Shield.LicenseModel.ExpireByDuration)return Shield.Log("Entity has the wrong License!"),
null;a=a.getParamByName("maxDurationInSeconds").getValue();return Math.ceil(a/60)}}}(),Error:function(){return{GetLastErrorCode:function(){return b.core.getLastErrorCode()},GetLastErrorMessage:function(){return b.core.getLastErrorMessage()},GetEventErrorMessage:function(){return b.core.getEventErrorMessage()},SetLastErrorMessage:function(a){},SetLastErrorCode:function(a){},debugMsg:function(a){b.debugMsg(a)},ClearLog:function(){$("#log").children().remove()}}}(),Segmentation:function(){return{SetFirstPageView:function(a){localStorage&&
null===localStorage.getItem(b.productId+"_first_"+a)&&localStorage.setItem(b.productId+"_first_"+a,localStorage.getItem("currentTime"))},GetFirstPageView:function(a){return localStorage?localStorage.getItem(b.productId+"_first_"+a):null},SetLastPageView:function(a){localStorage&&(localStorage.setItem("currentTime",new Date),null===localStorage.getItem(b.productId+"_last_"+a)?localStorage.setItem(b.productId+"_last_"+a,localStorage.getItem("currentTime")):localStorage.getItem(b.productId+"_last_"+
a)!=localStorage.getItem(b.productId+"_tempTime_"+a)&&localStorage.setItem(b.productId+"_last_"+a,localStorage.getItem(b.productId+"_tempTime_"+a)),localStorage.setItem(b.productId+"_tempTime_"+a,localStorage.getItem("currentTime")))},GetLastPageView:function(a){return localStorage?localStorage.getItem(b.productId+"_last_"+a):null},AddPageViewCount:function(a){localStorage&&(null==localStorage.getItem(b.productId+"_"+a)?localStorage.setItem(b.productId+"_"+a,1):(pageView=localStorage.getItem(b.productId+
"_"+a),localStorage.setItem(b.productId+"_"+a,++pageView)))},GetPageViewCount:function(a){return localStorage?localStorage.getItem(b.productId+"_"+a):0},SetTotalPlayTime:function(a){if(localStorage){var d=localStorage.getItem("currentTime");a=localStorage.getItem(b.productId+"_tempTime_"+a);d-=a;null!=localStorage.getItem(b.productId+"_playTime")&&(d=localStorage.getItem(b.productId+"_playTime")+d);localStorage.setItem(b.productId+"_playTime",d)}},GetTotalPlayTime:function(){return localStorage?localStorage.getItem(b.productId+
"_playTime_"):0},AddPlayCount:function(){localStorage&&(null==localStorage.getItem(b.productId+"_playCount")?localStorage.setItem(b.productId+"_playCount",1):(playCount=localStorage.getItem(b.productId+"_playCount"),localStorage.setItem(b.productId+"_playCount",++playCount)))},GetPlayCount:function(){return localStorage?localStorage.getItem(b.productId+"_playCount"):0},SetTimeStamp:function(){localStorage&&localStorage.setItem("currentTime",(new Date).getTime())},GetTimeStamp:function(){return localStorage?
localStorage.getItem("currentTime"):0},ClearLocalStorage:function(){if(localStorage){var a=b.productId.length;Object.keys(localStorage).forEach(function(d){d.substring(0,a)===b.productId&&localStorage.removeItem(d)})}}}}()}}();gs.core.isDebugVersion()?Shield.SetDebug(!0):Shield.SetDebug(gs.sessionData.getVar("debug"));jQuery.gameshield=function(r){};jQuery.gameshield.__proto__=Shield;jQuery.gameshield.GetEntity=Shield.Entities.GetCurrentEntity;jQuery.gameshield.GetEntityName=Shield.Entities.GetCurrentEntity().name;
jQuery.gameshield.GetTotalEntityCount=Shield.Entities.GetTotalEntityCount;jQuery.gameshield.GetEntityByIndex=Shield.Entities.GetEntityByIndex;jQuery.gameshield.GetUnlockRequestCode=Shield.Entities.GetUnlockRequestCode;jQuery.gameshield.GetAccessTimesRemaining=Shield.Entities.GetAccessTimesRemaining;jQuery.gameshield.GetSessionTimeMinutes=Shield.Entities.GetSessionTimeMinutes;jQuery.gameshield.GetSessionTimeSeconds=Shield.Entities.GetSessionTimeSeconds;jQuery.gameshield.GetTimeBegin=Shield.Entities.GetTimeBegin;
jQuery.gameshield.GetTimeEnd=Shield.Entities.GetTimeEnd;jQuery.gameshield.GetExpirePeriod=Shield.Entities.GetExpirePeriod;jQuery.gameshield.GetTimeFirstAccess=Shield.Entities.GetTimeFirstAccess;jQuery.gameshield.GetTimeRemaining=Shield.Entities.GetTimeRemaining;jQuery.gameshield.GetTimeRemainingSeconds=Shield.Entities.GetTimeRemainingSeconds;jQuery.gameshield.GetTotalTime=Shield.Entities.GetTotalTime;jQuery.gameshield.GetLastErrorCode=Shield.Error.GetLastErrorCode;
jQuery.gameshield.GetLastErrorMessage=Shield.Error.GetLastErrorMessage;jQuery.gameshield.debugMsg=Shield.Error.debugMsg;jQuery.gameshield.ClearLog=Shield.Error.ClearLog;jQuery.gameshield.SetFirstPageView=Shield.Segmentation.SetFirstPageView;jQuery.gameshield.GetFirstPageView=Shield.Segmentation.GetFirstPageView;jQuery.gameshield.SetLastPageView=Shield.Segmentation.SetLastPageView;jQuery.gameshield.GetLastPageView=Shield.Segmentation.GetLastPageView;jQuery.gameshield.AddPageViewCount=Shield.Segmentation.AddPageViewCount;
jQuery.gameshield.GetPageViewCount=Shield.Segmentation.GetPageViewCount;jQuery.gameshield.SetTotalPlayTime=Shield.Segmentation.SetTotalPlayTime;jQuery.gameshield.GetTotalPlayTime=Shield.Segmentation.GetTotalPlayTime;jQuery.gameshield.AddPlayCount=Shield.Segmentation.AddPlayCount;jQuery.gameshield.GetPlayCount=Shield.Segmentation.GetPlayCount;jQuery.gameshield.SetTimeStamp=Shield.Segmentation.SetTimeStamp;jQuery.gameshield.GetTimeStamp=Shield.Segmentation.GetTimeStamp;
jQuery.gameshield.ClearLocalStorage=Shield.Segmentation.ClearLocalStorage;